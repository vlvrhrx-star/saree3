<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saree3 | ÿßŸÑÿµŸäÿßÿØ ÿßŸÑÿ¥ÿßŸÖŸÑ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #0984e3; --secondary: #74b9ff; --bg: #dfe6e9; }
        * { box-sizing: border-box; font-family: 'Tajawal', sans-serif; }
        body { background: var(--bg); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding-bottom: 50px; }
        
        .header {
            width: 100%; padding: 40px 20px 80px; background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white; text-align: center; border-radius: 0 0 50px 50px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .logo { font-size: 2.2rem; font-weight: 900; margin-bottom: 10px; }
        
        .search-box {
            background: white; width: 90%; max-width: 600px; padding: 10px; border-radius: 50px;
            display: flex; gap: 10px; box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            transform: translateY(-50%);
        }
        input { flex: 1; border: none; outline: none; padding: 10px 20px; font-size: 1rem; }
        button {
            border: none; padding: 12px 30px; border-radius: 30px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .btn-paste { background: #f1f2f6; color: #333; }
        .btn-dl { background: var(--primary); color: white; }

        .result-card {
            background: white; width: 90%; max-width: 600px; padding: 20px; border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05); display: none; margin-top: -20px;
        }
        .video-info { display: flex; gap: 15px; margin-bottom: 20px; align-items: center; }
        .thumb { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid #eee; }
        
        .links { display: flex; flex-direction: column; gap: 10px; width: 100%; }
        
        .dl-btn {
            text-decoration: none; background: #00b894; color: white; padding: 15px;
            border-radius: 15px; font-size: 1rem; font-weight: bold; text-align: center;
            display: flex; justify-content: center; align-items: center; gap: 10px;
            box-shadow: 0 4px 10px rgba(0, 184, 148, 0.2);
        }
        .dl-btn.audio { background: #fdcb6e; color: #d35400; }
        
        .loader { display: none; margin: 20px auto; border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .status-badge {
            background: #ffeaa7; color: #d35400; padding: 4px 12px; border-radius: 10px; font-size: 0.8rem;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo"><i class="fas fa-search"></i> ÿßŸÑÿµŸäÿßÿØ | Hunter</div>
        <p>ÿ∂ÿπ ÿ±ÿßÿ®ÿ∑ ÿ£Ÿä ÿµŸÅÿ≠ÿ© Ÿàÿ≥ÿ£ÿ¨ŸÑÿ® ÿßŸÑŸÅŸäÿØŸäŸà ŸÑŸÉ</p>
    </div>

    <div class="search-box">
        <button class="btn-paste" onclick="paste()">ŸÑÿµŸÇ</button>
        <input type="text" id="url" placeholder="ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸáŸÜÿß...">
        <button class="btn-dl" onclick="startHunter()">ÿ®ÿ≠ÿ´</button>
    </div>

    <div class="loader" id="loader"></div>
    <div id="error" style="color:#d63031; display:none; margin-top:20px; text-align:center; font-weight:bold;"></div>

    <div class="result-card" id="result">
        <div class="video-info">
            <img id="thumb" class="thumb" src="">
            <div style="flex:1">
                <h4 id="title" style="margin:0 0 5px 0; font-size:0.9rem; line-height:1.4;"></h4>
                <span id="sourceBadge" class="status-badge"></span>
            </div>
        </div>
        <div class="links" id="links"></div>
    </div>

    <script>
        const RAPID_KEY = '93247df140mshd2aea963379b373p191d29jsnefecb1c82e24';

        async function paste() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('url').value = text;
            } catch (e) { alert('ÿßŸÑÿµŸÇ ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸäÿØŸàŸäÿßŸã'); }
        }

        async function startHunter() {
            const url = document.getElementById('url').value.trim();
            const loader = document.getElementById('loader');
            const result = document.getElementById('result');
            const error = document.getElementById('error');

            if(!url) return;

            loader.style.display = 'block';
            result.style.display = 'none';
            error.style.display = 'none';

            try {
                if (url.includes('tiktok.com')) {
                    await fetchTikTok(url);
                } else {
                    // ŸÑŸÑŸÖŸàÿßŸÇÿπ ÿßŸÑÿ£ÿÆÿ±Ÿâ
                    await fetchGenericSite(url);
                }
            } catch (err) {
                loader.style.display = 'none';
                error.innerText = "‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÅŸäÿØŸäŸà ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™ÿ≠ŸÖŸäŸÑ.";
                error.style.display = 'block';
            }
        }

        async function fetchTikTok(url) {
            // ŸÜÿ≥ÿ™ÿÆÿØŸÖ AllOrigins ŸÉÿ¨ÿ≥ÿ± ŸÑŸÑÿßÿ™ÿµÿßŸÑ
            const apiUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent('https://www.tikwm.com/api/?url=' + url)}`;
            const res = await fetch(apiUrl);
            const data = await res.json();
            
            if(data.code === 0) {
                // ÿ™ÿ¨ŸÖŸäÿπ ŸÉŸÑ ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© ŸÑÿ∂ŸÖÿßŸÜ ÿ∏ŸáŸàÿ± ÿ≤ÿ± Ÿàÿßÿ≠ÿØ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ
                let links = [];
                
                // 1. ÿ±ÿßÿ®ÿ∑ HD
                if(data.data.hdplay) links.push({ url: data.data.hdplay, text: 'üìπ ÿ™ÿ≠ŸÖŸäŸÑ ŸÅŸäÿØŸäŸà (HD)', type: 'video' });
                // 2. ÿ±ÿßÿ®ÿ∑ ÿπÿßÿØŸä (ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä)
                else if(data.data.play) links.push({ url: data.data.play, text: 'üìπ ÿ™ÿ≠ŸÖŸäŸÑ ŸÅŸäÿØŸäŸà (ÿπÿßÿØŸä)', type: 'video' });
                // 3. ÿ±ÿßÿ®ÿ∑ ÿµŸàÿ™
                if(data.data.music) links.push({ url: data.data.music, text: 'üéµ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ™ (MP3)', type: 'audio' });

                showData({
                    title: data.data.title || 'ŸÅŸäÿØŸäŸà ÿ™ŸäŸÉ ÿ™ŸàŸÉ',
                    thumb: data.data.cover,
                    source: 'TikTok Server',
                    links: links
                });
            } else {
                throw new Error("Failed");
            }
        }

        async function fetchGenericSite(targetUrl) {
            // ÿßŸÑÿµŸäÿßÿØ ÿßŸÑÿπÿßŸÖ ŸÑŸÑŸÖŸàÿßŸÇÿπ ÿßŸÑÿ£ÿÆÿ±Ÿâ
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(targetUrl)}`;
            const response = await fetch(proxyUrl);
            const data = await response.json();
            
            if(!data.contents) throw new Error();

            const parser = new DOMParser();
            const doc = parser.parseFromString(data.contents, 'text/html');
            const foundLinks = new Set();

            // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÑŸÅÿßÿ™ MP4 ŸÅŸä ÿßŸÑŸÉŸàÿØ
            const regex = /(https?:\/\/[^\s"']+\.mp4)/g;
            const matches = data.contents.match(regex);
            if(matches) matches.forEach(m => foundLinks.add(m));

            // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä Ÿàÿ≥ŸàŸÖ ÿßŸÑŸÅŸäÿØŸäŸà
            doc.querySelectorAll('video, source').forEach(v => {
                if(v.src && v.src.startsWith('http')) foundLinks.add(v.src);
            });

            if(foundLinks.size > 0) {
                const finalLinks = Array.from(foundLinks).map((link, i) => ({
                    url: link, text: `üì• ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ${i+1}`, type: 'video'
                }));
                
                showData({
                    title: doc.querySelector('title')?.innerText || 'ŸÅŸäÿØŸäŸà ŸÖŸÉÿ™ÿ¥ŸÅ',
                    thumb: 'https://cdn-icons-png.flaticon.com/512/2991/2991195.png',
                    source: 'Web Scraper',
                    links: finalLinks
                });
            } else {
                throw new Error();
            }
        }

        function showData(data) {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('result').style.display = 'block';

            document.getElementById('title').innerText = data.title;
            document.getElementById('thumb').src = data.thumb;
            document.getElementById('sourceBadge').innerText = data.source;

            const linksDiv = document.getElementById('links');
            linksDiv.innerHTML = '';

            data.links.forEach(link => {
                const cls = link.type === 'audio' ? 'dl-btn audio' : 'dl-btn';
                linksDiv.innerHTML += `
                    <a href="${link.url}" target="_blank" class="${cls}">
                        ${link.text}
                    </a>
                `;
            });
        }
    </script>
</body>
</html>
